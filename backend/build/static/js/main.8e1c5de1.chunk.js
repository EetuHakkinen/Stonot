(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{206:function(e,t,n){e.exports=n(354)},211:function(e,t,n){},212:function(e,t,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"},213:function(e,t,n){},218:function(e,t,n){},353:function(e,t){var n=null;function a(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=window.atob(t),a=new Uint8Array(n.length),r=0;r<n.length;r++)a[r]=n.charCodeAt(r);return a}"serviceWorker"in navigator&&"PushManager"in window?navigator.serviceWorker.register("sw.js").then(function(e){(n=e).pushManager.getSubscription().then(function(e){!(null===e)?console.log("subscribed!"):n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:a("BPoO-AvPYIs5yUy98MqLmuPd7mNtcf9FL2i-xxUpQu-ZFQw9irJiW2RtvDeMAdajbDrQLXegsgDswtdv9hVWLbM")}).then(function(e){!function(e){var t=new XMLHttpRequest;t.open("POST","/api/push/subscribe"),t.setRequestHeader("Content-Type","application/json;charset=UTF-8"),t.onreadystatechange=function(){4==t.readyState&&(200!==t.status&&304!=t.status?console.error("HTTP error "+t.status,null):console.log("subscribed"))},t.send(JSON.stringify(e))}(e),!0}).catch(function(e){console.error(e)})})}).catch(function(e){console.error(e)}):console.warn("Push messaging is not supported")},354:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(21),o=n.n(c),l=(n(211),n(122)),u=n(20),i=(n(212),n(213),n(34)),s=n(28),m=n(35),p=function(e){return{type:"SET",data:e}},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET":return t.data;default:return e}},f=(n(218),n(29)),E=n.n(f),g=n(22),b=n.n(g),h=n(27),v="http://localhost:3001/api/";function w(e){return y.apply(this,arguments)}function y(){return(y=Object(h.a)(b.a.mark(function e(t){var n;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.post(v+"users",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function k(e){return O.apply(this,arguments)}function O(){return(O=Object(h.a)(b.a.mark(function e(t){return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.post(v+"login",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}var j,x=function(e,t,n){return E.a.post(v+"stock",{name:t,ticker:e},{headers:{authorization:"bearer "+n.token}})},S=function(e){return E.a.get(v+"stock",{headers:{authorization:"bearer "+e.token}})},D=function(e,t){return E.a.delete(v+"stock/"+e,{headers:{authorization:"bearer "+t.token}})},L=function(e,t){return x(e.ticker,e.name,t),{type:"ADD",data:e}},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD":return e.concat(t.data);case"ADDALL":return t.data;default:return e}},A=n(25),M=n(119),P=n.n(M),T=function(e){var t=e.ticker,n=(e.name,e.id),a=e.user;return r.a.createElement(A.d,null,r.a.createElement(A.f,null,t),r.a.createElement(A.e,null,r.a.createElement(A.b,{"aria-label":"Delete",onClick:function(){return U(n,a)}},r.a.createElement(P.a,null))))},U=function(e,t){D(e,t)},C=Object(m.b)(function(e){return{user:e.user,stocks:e.stock}},{setUser:p,addStock:L,addAllStocks:function(e){return{type:"ADDALL",data:e}}})(function(e){var t,n=e.user,c=(e.setUser,e.stocks),o=e.addAllStocks;if(Object(a.useEffect)(function(){S(n).then(function(e){o(e.data)})},[]),!n||!n.token)return r.a.createElement(s.a,{to:"/login"});return console.log(c),r.a.createElement("div",{className:"container"},r.a.createElement("p",null,"moi"),r.a.createElement("h1",null,"Welcome to Stonot, ",n&&n.name,"!"),r.a.createElement("h2",null,"add a new stock"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),L({name:e.target.name.value,ticker:e.target.ticker.value},n),e.target.name.value="",e.target.ticker.value=""}},r.a.createElement("span",null,"ticker:"),r.a.createElement("input",{name:"ticker"}),r.a.createElement("span",null,"name"),r.a.createElement("input",{name:"name"}),r.a.createElement("button",{type:"submit"},"add")),r.a.createElement(A.a,{container:!0,spacing:16},r.a.createElement(A.a,(t={item:!0,xs:12},Object(u.a)(t,"xs",!0),Object(u.a)(t,"md",6),t),r.a.createElement(A.g,{variant:"h5"},"Stocks"),r.a.createElement(A.c,null,c.map(function(e){return r.a.createElement(T,Object.assign({key:e.id},e,{user:n}))})))))}),B=function(e){var t=function(){var e=Object(h.a)(b.a.mark(function e(t){var n;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={username:t.target.username.value,name:t.target.name.value,password:t.target.password.value},e.next=4,w(n);case 4:200===e.sent.status&&window.location.replace("/login");case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement("h1",null,"Registeration form"),r.a.createElement("form",{onSubmit:t},r.a.createElement("p",null,"Username"),r.a.createElement("input",{type:"text",name:"username"}),r.a.createElement("p",null,"Name"),r.a.createElement("input",{type:"text",name:"name"}),r.a.createElement("p",null,"Password"),r.a.createElement("input",{type:"password",name:"password"}),r.a.createElement("button",{type:"submit"},"Register")))},R={setUser:p},J=Object(m.b)(function(e){return{user:e.user}},R)(function(e){var t=e.user,n=e.setUser;Object(a.useEffect)(function(){var e=window.localStorage.getItem("stonot-user"),t=JSON.parse(e);n(t)},[]);var c=function(){var e=Object(h.a)(b.a.mark(function e(t){var a;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,k({username:t.target.username.value,password:t.target.password.value});case 3:200===(a=e.sent).status&&(n(a.data),window.localStorage.setItem("stonot-user",JSON.stringify(a.data)),window.location.replace("/"));case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return t&&t.token?r.a.createElement(s.a,{to:"/"}):r.a.createElement("div",null,r.a.createElement("h1",null,"Login"),r.a.createElement("form",{onSubmit:function(e){return c(e)}},r.a.createElement("p",null,"username: "),r.a.createElement("input",{type:"text",name:"username"}),r.a.createElement("p",null,"password:"),r.a.createElement("input",{type:"password",name:"password"}),r.a.createElement("button",{type:"submit"},"Log in"),r.a.createElement("br",null),r.a.createElement(i.b,{to:"/registeration"},"No user yet?")))}),H=n(16),I=n(56),W=n.n(I),z=n(57),q=n.n(z),F=n(40),G=n.n(F),Q=n(58),V=n.n(Q),X=n(53),$=n.n(X),K=n(60),Y=n.n(K),Z=n(41),_=n.n(Z),ee=n(120),te=n.n(ee),ne=n(121),ae=n.n(ne),re=n(54),ce=n.n(re),oe=n(59),le=n.n(oe),ue=n(55),ie=n.n(ue),se=n(81),me=n.n(se),pe=Object(H.createMuiTheme)({palette:{primary:{main:"#673ab7"},secondary:{main:"#ffb74d"}},overrides:{MuiBottomNavigation:{root:{backgroundColor:"#673ab7"}},MuiBottomNavigationAction:{root:{color:me.a[400],"&$selected":{color:"#fff"}},selected:{color:"#fff"},label:{"&$selected":{fontSize:"8pt"}}},MuiCircularProgress:{root:{margin:"auto"}}}}),de=n(7),fe=n.n(de);var Ee=(j={root:{flexGrow:1},grow:{flexGrow:1},menuButton:{marginLeft:-12,marginRight:20}},Object(u.a)(j,"root",{display:"flex"}),Object(u.a)(j,"menuButton",{marginLeft:12,marginRight:20}),Object(u.a)(j,"hide",{display:"none"}),Object(u.a)(j,"drawer",{width:240,flexShrink:0}),Object(u.a)(j,"drawerPaper",{width:240}),Object(u.a)(j,"drawerHeader",{display:"flex",alignItems:"center",padding:"0 8px",justifyContent:"flex-end"}),Object(u.a)(j,"content",{flexGrow:1,padding:"5px",marginLeft:-240}),Object(u.a)(j,"contentShift",{marginLeft:0}),j),ge=Object(H.withStyles)(Ee,{withTheme:!1})(function(e){var t=e.classes,n=Object(a.useState)(!1),c=Object(l.a)(n,2),o=c[0],u=c[1];return r.a.createElement("div",{className:t.root},r.a.createElement(W.a,{position:"fixed"},r.a.createElement(q.a,null,r.a.createElement(_.a,{className:fe()(t.menuButton,o&&t.hide),color:"inherit","aria-label":"Menu",onClick:function(){return u(!o)}},r.a.createElement(te.a,null)),r.a.createElement(G.a,{variant:"h6",color:"inherit",className:t.grow},"Stonot"))),r.a.createElement(V.a,{className:t.drawer,variant:"persistent",anchor:"left",open:o,classes:{paper:t.drawerPaper}},r.a.createElement("div",{className:t.drawerHeader},r.a.createElement(_.a,{onClick:function(){return u(!1)}},r.a.createElement(ae.a,null))),r.a.createElement($.a,null,r.a.createElement(ce.a,{button:!0},r.a.createElement(le.a,null),r.a.createElement(ie.a,{primary:"Text here"}))),r.a.createElement(Y.a,null)))}),be=function(){return r.a.createElement("div",{className:"container"},r.a.createElement(i.a,null,r.a.createElement(H.MuiThemeProvider,{theme:pe},r.a.createElement(ge,null),r.a.createElement(s.b,{exact:!0,path:"/",render:function(){return r.a.createElement(C,null)}}),r.a.createElement(s.b,{path:"/registeration",render:function(){return r.a.createElement(B,null)}}),r.a.createElement(s.b,{path:"/login",render:function(){return r.a.createElement(J,null)}}))))},he=(n(353),n(42)),ve=Object(he.c)(Object(he.b)({user:d,stock:N}));o.a.render(r.a.createElement(m.a,{store:ve},r.a.createElement(be,null)),document.getElementById("root"))}},[[206,1,2]]]);
//# sourceMappingURL=main.8e1c5de1.chunk.js.map